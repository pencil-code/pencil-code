#!/bin/bash
#
# Generate code coverage reports. Before running this script, pc_auto-test should've been run with the --coverage flag.
#
# 2025-Dec-09/Kishore: coded

find "$PENCIL_HOME"/src -type f -name '*.f90' -execdir gcov {} \;
lcov --capture --directory "$PENCIL_HOME"/src --output-file "$PENCIL_HOME"/pencil-codecov.info
genhtml --output-directory "$PENCIL_HOME"/lcov_html pencil-codecov.info
